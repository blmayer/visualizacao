<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Chronological Diagram of Asia</title>
    <script type="text/javascript" src="https://mbostock.github.com/d3/d3.v2.js"></script>
    <style type="text/css">
        .chart {
            shape-rendering: crispEdges;
        }

        .mini text {
            font: 9px sans-serif;
        }

        .main text {
            font: 12px sans-serif;
        }

        .miniItem0 {
            fill: darksalmon;
            stroke-width: 6;
        }

        .miniItem1 {
            fill: darkolivegreen;
            fill-opacity: .7;
            stroke-width: 6;
        }

        .miniItem2 {
            fill: slategray;
            fill-opacity: .7;
            stroke-width: 6;
        }

        .brush .extent {
            stroke: gray;
            fill: dodgerblue;
            fill-opacity: .365;
        }
    </style>
</head>

<body>
    <script type="text/javascript">
        // data
        var lanes = ['Hungary ', 'West Germany', 'United States', 'Netherlands', 'Austria ', 'United Kingdom'],
            laneLength = lanes.length,
            items = [
                { "lane": 2, "id": "Community World Theater", "start": 545713200, "end": 545713200 }, { "lane": 2, "id": "GESCCO", "start": 546836400, "end": 546836400 }, { "lane": 2, "id": "KAOS Olympia Community Radio", "start": 547268400, "end": 547268400 }, { "lane": 2, "id": "Community World Theater", "start": 551761200, "end": 551761200 }, { "lane": 2, "id": "Community World Theater", "start": 555476400, "end": 555476400 }, { "lane": 2, "id": "Community World Theater", "start": 569901600, "end": 569901600 }, { "lane": 2, "id": "Community World Theater", "start": 574743600, "end": 574743600 }, { "lane": 2, "id": "The Central Tavern", "start": 576644400, "end": 576644400 }, { "lane": 2, "id": "The Vogue (Sub Pop Sunday)", "start": 577854000, "end": 577854000 }, { "lane": 2, "id": "The Glass House (house party)", "start": 579582000, "end": 579582000 }, { "lane": 2, "id": "The Evergreen State College", "start": 580186800, "end": 580186800 }, { "lane": 2, "id": "The Vogue", "start": 580705200, "end": 580705200 }, { "lane": 2, "id": "The Central Tavern (Toe Jam \'88)", "start": 581223600, "end": 581223600 }, { "lane": 2, "id": "Hal Holmes Community Center", "start": 582519600, "end": 582519600 }, { "lane": 2, "id": "The Vogue (Sub Pop Sunday)", "start": 583902000, "end": 583902000 }, { "lane": 2, "id": "The Central Tavern", "start": 585630000, "end": 585630000 }, { "lane": 2, "id": "Squid Row Tavern", "start": 586234800, "end": 586234800 }, { "lane": 2, "id": "Capitol Lake Park (Capitol Lake Jam)", "start": 588049200, "end": 588049200 }, { "lane": 2, "id": "The Vogue", "start": 588826800, "end": 588826800 }, { "lane": 2, "id": "Union Station", "start": 594007200, "end": 594007200 }, { "lane": 2, "id": "Dorm K208, The Evergreen State College (dorm party)", "start": 594180000, "end": 594180000 }, { "lane": 2, "id": "Speedy O\'Tubbs Rhythmic Underground", "start": 596253600, "end": 596253600 }, { "lane": 2, "id": "The Underground", "start": 596944800, "end": 596944800 }, { "lane": 2, "id": "Eagles Hall/FoE Aerie 252", "start": 598672800, "end": 598672800 }, { "lane": 2, "id": "The Underground", "start": 599277600, "end": 599277600 }, { "lane": 2, "id": "Satyricon", "start": 600055200, "end": 600055200 }, { "lane": 2, "id": "Satyricon", "start": 601351200, "end": 601351200 }, { "lane": 2, "id": "Covered Wagon Saloon", "start": 603082800, "end": 603082800 }, { "lane": 2, "id": "Marsugi\'s", "start": 603169200, "end": 603169200 }, { "lane": 2, "id": "East Ballroom, Husky Union Building, University of Washington", "start": 604378800, "end": 604378800 }, { "lane": 2, "id": "Reko/Muse", "start": 607402800, "end": 607402800 },
                { "lane": 2, "id": "Annex Theatre", "start": 607921200, "end": 607921200 }, { "lane": 2, "id": "The Vogue", "start": 609562800, "end": 609562800 }, { "lane": 2, "id": "Lindbloom Student Center, Green River Community College", "start": 612154800, "end": 612154800 }, { "lane": 2, "id": "Moore Theater (Lame Fest)", "start": 613364400, "end": 613364400 }, { "lane": 2, "id": "The Blue Gallery", "start": 613450800, "end": 613450800 }, { "lane": 2, "id": "The Vogue", "start": 614401200, "end": 614401200 }, { "lane": 2, "id": "Covered Wagon Saloon", "start": 614487600, "end": 614487600 }, { "lane": 2, "id": "Rhino Records Westwood", "start": 614574000, "end": 614574000 }, { "lane": 2, "id": "Al\'s Bar", "start": 614660400, "end": 614660400 }, { "lane": 2, "id": "Sun Club", "start": 614746800, "end": 614746800 }, { "lane": 2, "id": "Rockin\' T.P.", "start": 614919600, "end": 614919600 },
                { "lane": 2, "id": "Alfred\'s", "start": 615178800, "end": 615178800 }, { "lane": 2, "id": "The Axiom", "start": 615265200, "end": 615265200 }, { "lane": 2, "id": "Axis Club", "start": 615351600, "end": 615351600 }, { "lane": 2, "id": "The Electric Jungle", "start": 615438000, "end": 615438000 }, { "lane": 2, "id": "611 Pizza", "start": 615524400, "end": 615524400 }, { "lane": 2, "id": "Gabe\'s Oasis", "start": 615610800, "end": 615610800 }, { "lane": 2, "id": "Uptown Bar", "start": 615697200, "end": 615697200 }, { "lane": 2, "id": "O\'Cayz Corral", "start": 615783600, "end": 615783600 }, { "lane": 2, "id": "Club Dreamerz", "start": 615870000, "end": 615870000 }, { "lane": 2, "id": "The Sonic Temple, Masonic Temple", "start": 615956400, "end": 615956400 }, { "lane": 2, "id": "J.C. Dobbs", "start": 616215600, "end": 616215600 }, { "lane": 2, "id": "Maxwell\'s", "start": 616302000, "end": 616302000 }, { "lane": 2, "id": "Green Street Station", "start": 616474800, "end": 616474800 }, { "lane": 2, "id": "Pyramid Club (New Music Seminar)", "start": 616734000, "end": 616734000 }, { "lane": 2, "id": "Center on Contemporary Art", "start": 620103600, "end": 620103600 }, { "lane": 2, "id": "The Vogue", "start": 622782000, "end": 622782000 }, { "lane": 2, "id": "Uptown Bar", "start": 622954800, "end": 622954800 }, { "lane": 2, "id": "Cabaret Metro", "start": 623127600, "end": 623127600 }, { "lane": 2, "id": "Trito\'s Uptown", "start": 623214000, "end": 623214000 }, { "lane": 2, "id": "The Club Soda", "start": 623300400, "end": 623300400 }, { "lane": 2, "id": "Blind Pig", "start": 623386800, "end": 623386800 }, { "lane": 2, "id": "Bling Pig", "start": 623386800, "end": 623386800 }, { "lane": 2, "id": "Murphy\'s Pub", "start": 623646000, "end": 623646000 }, { "lane": 2, "id": "The Outhouse", "start": 623732400, "end": 623732400 }, { "lane": 2, "id": "Lifticket Lounge", "start": 623818800, "end": 623818800 }, { "lane": 2, "id": "Garage", "start": 624078000, "end": 624078000 }, { "lane": 2, "id": "Penny Lane Coffeehouse", "start": 624250800, "end": 624250800 }, { "lane": 5, "id": "Riverside", "start": 625111200, "end": 625111200 }, { "lane": 5, "id": "Manchester Polytechnic", "start": 625197600, "end": 625197600 }, { "lane": 5, "id": "Students\' Union, Manchester Polytechnic", "start": 625197600, "end": 625197600 }, { "lane": 5, "id": "Duchess of York", "start": 625284000, "end": 625284000 }, { "lane": 5, "id": "SOAS Bar", "start": 625456800, "end": 625456800 }, { "lane": 5, "id": "Students\' Union, School of Oriental & African Studies", "start": 625456800, "end": 625456800 },
                { "lane": 5, "id": "Ents Hall, Portsmouth Polytechnic", "start": 625543200, "end": 625543200 }, { "lane": 5, "id": "Edward\'s No. 8", "start": 625629600, "end": 625629600 }, { "lane": 5, "id": "The Wilde Club, Norwich Arts Centre", "start": 625716000, "end": 625716000 }, { "lane": 3, "id": "Nighttown", "start": 625888800, "end": 625888800 }, { "lane": 3, "id": "Villa 65 (Nozems-a-GoGo)", "start": 625888800, "end": 625888800 }, { "lane": 3, "id": "Vera", "start": 625975200, "end": 625975200 }, { "lane": 3, "id": "Tivoli", "start": 626061600, "end": 626061600 }, { "lane": 3, "id": "Gigant", "start": 626148000, "end": 626148000 }, { "lane": 3, "id": "Melkweg", "start": 626234400, "end": 626234400 }, { "lane": 1, "id": "B-52", "start": 626407200, "end": 626407200 }, { "lane": 1, "id": "Rose Club", "start": 626493600, "end": 626493600 }, { "lane": 1, "id": "Bad", "start": 626580000, "end": 626580000 }, { "lane": 1, "id": "Forum Enger", "start": 626666400, "end": 626666400 }, { "lane": 1, "id": "Ecstacy", "start": 626752800, "end": 626752800 }, { "lane": 1, "id": "Kulturzentrum", "start": 626839200, "end": 626839200 }, { "lane": 1, "id": "Fabrik", "start": 626925600, "end": 626925600 }, { "lane": 1, "id": "Schwimmbad", "start": 627098400, "end": 627098400 }, { "lane": 1, "id": "Schwimmbad Musik-Club", "start": 627098400, "end": 627098400 }, { "lane": 1, "id": "Trust", "start": 627184800, "end": 627184800 }, { "lane": 1, "id": "Circus", "start": 627271200, "end": 627271200 }, { "lane": 1, "id": "Kultur-Basar", "start": 627357600, "end": 627357600 }, { "lane": 4, "id": "Kapu", "start": 627530400, "end": 627530400 }, { "lane": 0, "id": "Pet√µfi Csarnok", "start": 627616800, "end": 627616800 }, { "lane": 4, "id": "U4", "start": 627703200, "end": 627703200 }, { "lane": 4, "id": "Cafe Pi", "start": 627789600, "end": 627789600 }
            ]
        timeBegin = 545713200,
            timeEnd = 627799600;
    </script>
    <script type="text/javascript">
        var m = [20, 15, 15, 120], //top right bottom left
            w = 1460 - m[1] - m[3],
            h = 1000 - m[0] - m[2],
            miniHeight = laneLength * 12 + 50,
            mainHeight = h - miniHeight - 50;

        //scales
        var x = d3.scale.linear()
            .domain([timeBegin, timeEnd])
            .range([0, w]);
        var x1 = d3.scale.linear()
            .range([0, w]);
        var y1 = d3.scale.linear()
            .domain([0, laneLength])
            .range([0, mainHeight]);
        var y2 = d3.scale.linear()
            .domain([0, laneLength])
            .range([0, miniHeight]);

        var chart = d3.select("body")
            .append("svg")
            .attr("width", w + m[1] + m[3])
            .attr("height", h + m[0] + m[2])
            .attr("class", "chart");

        chart.append("defs").append("clipPath")
            .attr("id", "clip")
            .append("rect")
            .attr("width", w)
            .attr("height", mainHeight);

        var main = chart.append("g")
            .attr("transform", "translate(" + m[3] + "," + m[0] + ")")
            .attr("width", w)
            .attr("height", mainHeight)
            .attr("class", "main");

        var mini = chart.append("g")
            .attr("transform", "translate(" + m[3] + "," + (mainHeight + m[0]) + ")")
            .attr("width", w)
            .attr("height", miniHeight)
            .attr("class", "mini");

        //main lanes and texts
        main.append("g").selectAll(".laneLines")
            .data(items)
            .enter().append("line")
            .attr("x1", m[1])
            .attr("y1", function (d) { return y1(d.lane); })
            .attr("x2", w)
            .attr("y2", function (d) { return y1(d.lane); })
            .attr("stroke", "lightgray")

        main.append("g").selectAll(".laneText")
            .data(lanes)
            .enter().append("text")
            .text(function (d) { return d; })
            .attr("x", -m[1])
            .attr("y", function (d, i) { return y1(i + .5); })
            .attr("dy", ".5ex")
            .attr("text-anchor", "end")
            .attr("class", "laneText");

        // mini lanes and texts
        mini.append("g").selectAll(".laneLines")
            .data(items)
            .enter().append("line")
            .attr("x1", m[1])
            .attr("y1", function (d) { return y2(d.lane); })
            .attr("x2", w)
            .attr("y2", function (d) { return y2(d.lane); })
            .attr("stroke", "lightgray");

        mini.append("g").selectAll(".laneText")
            .data(lanes)
            .enter().append("text")
            .text(function (d) { return d; })
            .attr("x", -m[1])
            .attr("y", function (d, i) { return y2(i + .5); })
            .attr("dy", ".5ex")
            .attr("text-anchor", "end")
            .attr("class", "laneText");

        var itemRects = main.append("g")
            .attr("clip-path", "url(#clip)");

        //mini item rects
        mini.append("g").selectAll("miniItems")
            .data(items)
            .enter().append("rect")
            .attr("class", function (d) { return "miniItem" + d.lane; })
            .attr("x", function (d) { return x(d.start); })
            .attr("y", function (d) { return y2(d.lane + .5) - 5; })
            .attr("width", function (d) { return x(d.end - d.start); })
            .attr("height", 10);

        //mini labels
        mini.append("g").selectAll(".miniLabels")
            .data(items)
            .enter().append("text")
            .text(function (d) { return d.id; })
            .attr("x", function (d) { return x(d.start); })
            .attr("y", function (d) { return y2(d.lane + .5); })
            .attr("dy", ".5ex");

        //brush
        var brush = d3.svg.brush()
            .x(x)
            .on("brush", display);

        mini.append("g")
            .attr("class", "x brush")
            .call(brush)
            .selectAll("rect")
            .attr("y", 1)
            .attr("height", miniHeight - 1);

        display();

        function display() {
            var rects, labels,
                minExtent = brush.extent()[0],
                maxExtent = brush.extent()[1],
                visItems = items.filter(function (d) { return d.start < maxExtent && d.end > minExtent; });

            mini.select(".brush")
                .call(brush.extent([minExtent, maxExtent]));

            x1.domain([minExtent, maxExtent]);

            //update main item rects
            rects = itemRects.selectAll("rect")
                .data(visItems, function (d) { return d.id; })
                .attr("x", function (d) { return x1(d.start); })
                .attr("width", function (d) { return x1(d.end) - x1(d.start); });

            rects.enter().append("rect")
                .attr("class", function (d) { return "miniItem" + d.lane; })
                .attr("x", function (d) { return x1(d.start); })
                .attr("y", function (d) { return y1(d.lane) + 10; })
                .attr("width", function (d) { return x1(d.end) - x1(d.start); })
                .attr("height", function (d) { return .8 * y1(1); });

            rects.exit().remove();

            //update the item labels
            labels = itemRects.selectAll("text")
                .data(visItems, function (d) { return d.id; })
                .attr("x", function (d) { return x1(Math.max(d.start, minExtent) + 2); });

            labels.enter().append("text")
                .text(function (d) { return d.id; })
                .attr("x", function (d) { return x1(Math.max(d.start, minExtent)); })
                .attr("y", function (d) { return y1(d.lane + .5); })
                .attr("text-anchor", "start");

            labels.exit().remove();

        }

    </script>
</body>

</html>